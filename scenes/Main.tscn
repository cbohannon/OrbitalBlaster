[gd_scene load_steps=3 format=3 uid="uid://c2hvt4yqm5m57"]

[ext_resource type="Script" path="res://scripts/Main.cs" id="1_main"]
[ext_resource type="Script" path="res://scripts/Starfield.cs" id="2_starfield"]

[node name="Main" type="Node2D"]
script = ExtResource("1_main")

; Deep space background — fills the 1280x720 viewport
; mouse_filter=2 (Ignore) prevents it from blocking clicks to game objects
[node name="Background" type="ColorRect" parent="."]
offset_right = 1280.0
offset_bottom = 720.0
color = Color(0.02, 0.02, 0.06, 1)
mouse_filter = 2

; Scrolling parallax starfield — three speed layers for depth illusion
[node name="Starfield" type="Node2D" parent="."]
script = ExtResource("2_starfield")

; Defense line — objects that cross this cause the player to lose a life
[node name="BaseLine" type="ColorRect" parent="."]
offset_top = 650.0
offset_right = 1280.0
offset_bottom = 655.0
color = Color(0.18, 0.52, 1.0, 1)
mouse_filter = 2

; Parent node for all spawned gameplay objects (asteroids, projectiles, etc.)
[node name="GameWorld" type="Node2D" parent="."]

; Fires every 2 seconds to spawn a new asteroid (interval shrinks each wave)
[node name="SpawnTimer" type="Timer" parent="."]
wait_time = 2.0
autostart = true

; Advances the wave every 30 seconds
[node name="WaveTimer" type="Timer" parent="."]
wait_time = 30.0
autostart = true

; HUD rendered on top of everything via CanvasLayer
[node name="HUD" type="CanvasLayer" parent="."]
layer = 1

[node name="LivesLabel" type="Label" parent="HUD"]
offset_left = 10.0
offset_top = 10.0
offset_right = 200.0
offset_bottom = 40.0
text = "Lives: 3"

[node name="WaveLabel" type="Label" parent="HUD"]
offset_left = 590.0
offset_top = 10.0
offset_right = 690.0
offset_bottom = 40.0
text = "Wave: 1"
horizontal_alignment = 1

[node name="ScoreLabel" type="Label" parent="HUD"]
offset_left = 1080.0
offset_top = 10.0
offset_right = 1270.0
offset_bottom = 40.0
text = "Score: 0"
horizontal_alignment = 2

; Brief centered announcement shown when a new wave begins
[node name="WaveAnnounceLabel" type="Label" parent="HUD"]
anchor_left = 0.5
anchor_right = 0.5
offset_left = -200.0
offset_top = 300.0
offset_right = 200.0
offset_bottom = 360.0
text = ""
horizontal_alignment = 1
theme_override_font_sizes/font_size = 48
visible = false

; Game Over overlay — hidden until all lives are lost, sits above HUD
[node name="GameOverScreen" type="CanvasLayer" parent="."]
layer = 2
visible = false

[node name="Overlay" type="ColorRect" parent="GameOverScreen"]
offset_right = 1280.0
offset_bottom = 720.0
color = Color(0, 0, 0, 0.75)

[node name="GameOverLabel" type="Label" parent="GameOverScreen"]
anchor_left = 0.5
anchor_right = 0.5
offset_left = -200.0
offset_top = 240.0
offset_right = 200.0
offset_bottom = 320.0
text = "GAME OVER"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 64

[node name="FinalScoreLabel" type="Label" parent="GameOverScreen"]
anchor_left = 0.5
anchor_right = 0.5
offset_left = -150.0
offset_top = 340.0
offset_right = 150.0
offset_bottom = 380.0
text = "Final Score: 0"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 32

[node name="PlayAgainButton" type="Button" parent="GameOverScreen"]
anchor_left = 0.5
anchor_right = 0.5
offset_left = -210.0
offset_top = 410.0
offset_right = -10.0
offset_bottom = 450.0
text = "Play Again"

[node name="QuitButton" type="Button" parent="GameOverScreen"]
anchor_left = 0.5
anchor_right = 0.5
offset_left = 10.0
offset_top = 410.0
offset_right = 210.0
offset_bottom = 450.0
text = "Quit"
